@model List<BerretDecailletBookingGUI.ViewModel.RoomSelectedVM>
@using System.Web.Mvc.Html;

@{ 
    ViewBag.Title = "Available rooms";
    string roomTypeIcon = "";
    string roomTypeTooltip = "";
    string tvColorIcon = "";
    string tvTooltip = "";
    string hairdryerColorIcon = "";
    string hairdryerTooltip = "";
    string modalId = "";
    int roomPos = 0;
}

@using (Html.BeginForm("Create", "Reservations", FormMethod.Post))
{
    <div class="fixed-action-btn">
        <button class="btn-floating btn-large waves-effect waves-light red" type="submit"><i class="material-icons">send</i></button>
    </div>

    var i = 0;
    for (i = 0; i < Model.Count; i++)
    {
        bool HasTV = (Model[i].Room.HasTV == null) ? false : (bool)Model[i].Room.HasTV;
        bool HasHairdryer = (Model[i].Room.HasHairdryer == null) ? false : (bool)Model[i].Room.HasHairdryer;

        roomTypeIcon = (Model[i].Room.Type == 1) ? "person" : "people";
        roomTypeTooltip = (Model[i].Room.Type == 1) ? "Single" : "Double";
        tvColorIcon = HasTV ? "text-darken-3" : "text-lighten-2";
        tvTooltip = HasTV ? "Has TV" : "No TV";
        hairdryerColorIcon = HasHairdryer ? "text-darken-3" : "text-lighten-2";
        hairdryerTooltip = HasHairdryer ? "Has hairdryer" : "No hairdryer";

        if (i % 3 == 0)
        {
            @Html.Raw("<div class='row'>")
        }

        @Html.HiddenFor(m => m[i].CheckIn)
        @Html.HiddenFor(m => m[i].CheckOut)

        <div class="col s4">
            <div class="card">
                <div class="card-image">
                    <div class="carousel carousel-slider center" data-indicators="true" style="height:400px;">
                        <div class="carousel-item red" href="#one!" style=" background: url('http://www.tradeinterint.com/wp-content/uploads/2017/03/industrial-servicee-1.jpg');">
                            <h2>First Panel</h2>

                            <p class="white-text">This is your first panel</p>
                        </div>
                        <div class="carousel-item blue" href="#two!">
                            <h2>First Panel</h2>

                            <p class="white-text">This is your first panel</p>
                        </div>
                        <div class="carousel-item" href="#three!">
                            <h2>First Panel</h2>

                            <p class="white-text">This is your first panel</p>
                        </div>
                        <div class="carousel-item" href="#four!">
                            <h2>First Panel</h2>

                            <p class="white-text">This is your first panel</p>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <span>@Html.ActionLink(Model[i].Room.Hotel.Name, "Details", "Hotels", new { id = Model[i].Room.Hotel.IdHotel }, new { @class = "card-title" }) </span>
                    <p>@Html.DisplayFor(m => m[i].Room.Description)</p>
                    <div class="row">
                        <div class="col s4 center-align">
                            <p><i class="tiny material-icons grey-text text-darken-3 tooltipped" data-position="top" data-delay="50" data-tooltip="@Html.Raw(roomTypeTooltip)">@Html.Raw(roomTypeIcon)</i></p>
                        </div>
                        <div class="col s4 center-align">
                            <p><i class="tiny material-icons grey-text @Html.Raw(tvColorIcon) tooltipped" data-position="top" data-delay="50" data-tooltip="@Html.Raw(tvTooltip)">tv</i></p>
                        </div>
                        <div class="col s4 center-align">
                            <p><i class="tiny material-icons grey-text @Html.Raw(hairdryerColorIcon) tooltipped" data-position="top" data-delay="50" data-tooltip="@Html.Raw(hairdryerTooltip)">local_offer</i></p>
                        </div>
                    </div>
                    <p class="center-align"><i class="material-icons grey-text text-darken-3">attach_money</i> @Html.DisplayFor(m => m[i].Room.Price) CHF</p>
                </div>
                <div class="card-action">
                    <p>
                        @Html.CheckBoxFor(m => m[i].IsSelected, htmlAttributes: new { id = "room" + i })
                        @Html.HiddenFor(m => m[i].Room.IdRoom)
                        @Html.Label("room" + i.ToString(), "Select")                            
                    </p>
                </div>
            </div>
        </div>

        roomPos++;
        if (roomPos % 3 == 0)
        {
        <!-- Close last row -->
            @Html.Raw("</div>")
        }
    }


    if (roomPos % 3 != 0)
    {
    <!-- Close last row -->
        @Html.Raw("</div>")
    }
}

    


@section scripts{
    <script>
        $(document).ready(function () {
            // workaround for checkbox in materialize
            $("input[type='hidden']").each(function (index, element) {
                $(this).appendTo($(element).parent());
            });

            $('.carousel-slider').carousel({ fullWidth: true, padding: 0 }, setTimeout(autoplay, 4500));
            function autoplay() {
                $('.carousel').carousel('next');
                setTimeout(autoplay, 7500);
            }

            //$('.modal').modal();
            
            //$('.carousel').carousel();
        });
        
    </script>
    }